<!DOCTYPE html>
<html lang="cs">
  <head>

  </head>
<body>
<script>
  window.devPanel = {
    links: {
      obtainConfigurations: 'http://involve-cms/utils/dev-panel/obtain-configurations',
      exportConfiguration: 'http://involve-cms/utils/dev-panel/export-configuration',
      obtainData: 'http://involve-cms/utils/dev-panel/obtain-data',
      saveData: 'http://involve-cms/utils/dev-panel/save-data',
    },

    getCurrentConfiguration: function () {
      let name = 'dev-panel-configuration' + '=';
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }

      return 'default';
    },
    loadConfigurations: function () {
      var request = new XMLHttpRequest();
      request.open('GET', window.devPanel.links.obtainConfigurations, false);
      request.onload = function () {
        window.devPanel.configurations = JSON.parse(this.response);
      };
      request.send();
    },
    exportConfiguration: function (configuration) {
      if (!configuration) {
        configuration = window.devPanel.getCurrentConfiguration();
      }

      window.location.href = window.devPanel.links.exportConfiguration + '?configuration=' + configuration;
    },

    loadData: function (configuration) {
      if (!configuration) {
        configuration = window.devPanel.getCurrentConfiguration();
      }

      var request = new XMLHttpRequest();
      request.open('GET', window.devPanel.links.obtainData + '?configuration=' + configuration, false);
      request.onload = function () {
        window.devPanel.data = JSON.parse(this.response);
      };
      request.send();
    },
    saveData: function () {
      let configuration = window.devPanel.getCurrentConfiguration();

      var request = new XMLHttpRequest();
      request.open('POST', window.devPanel.links.saveData + '?configuration=' + configuration, true);
      request.send(JSON.stringify(window.devPanel.data));
    }
  };

  window.devPanel.loadConfigurations();
  window.devPanel.loadData();
</script>

<div style="margin-left: 350px;">
    <form>
        <input type="text" name="text1" id="t1"><br/>
        <input type="password" name="password1"><br/>
        <input type="email" name="email1"><br/>
        <input type="tel" name="tel1"><br/>

        <input type="checkbox" name="checkbox1" value="agree">
        <input type="checkbox" name="checkbox1" value="disagree"><br/>

        <input type="radio" name="radio1" value="male">
        <input type="radio" name="radio1" value="female"><br/>

        <select name="select1">
            <option value="option1">Val 1</option>
            <option value="option2">Val 2</option>
        </select><br>

        <textarea name="textarea1"></textarea><br>

        <input type="submit"><br>
        <button type="submit" value="_submit">test</button>
    </form>
</div>

<div id="dev-panel"></div>
</body>
</html>
